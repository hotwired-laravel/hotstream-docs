<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="If you installed Hostream using the --teams option, your application will be scaffolded to support team creation and management. Hotstream&#039;s team features allow each registered user to create and belong to multiple teams. By default, every registered user will belong to a &quot;Personal&quot; team.">

        <meta property="og:site_name" content="Hotstream Docs"/>
        <meta property="og:title" content="Teams | Hotstream Docs"/>
        <meta property="og:description" content="If you installed Hostream using the --teams option, your application will be scaffolded to support team creation and management. Hotstream&#039;s team features allow each registered user to create and belong to multiple teams. By default, every registered user will belong to a &quot;Personal&quot; team."/>
        <meta property="og:url" content="https://hotstream.turbo-laravel.com/docs/1.x/features/teams"/>
        <meta property="og:image" content="/assets/img/logo.png"/>
        <meta property="og:type" content="website"/>

        <meta name="twitter:image:alt" content="Hotstream Docs">
        <meta name="twitter:card" content="summary_large_image">

        
        <title>Hotstream Docs | Teams</title>

        <link rel="home" href="https://hotstream.turbo-laravel.com">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <link rel="shortcut icon" href="/favicon.ico">
        <meta name="description" content="A Hotwired Application Starter Kit for Laravel">
        <meta name="theme-color" content="#ffffff">

        
                    <!-- Insert analytics code here -->
        
        <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,700,700i,800,800i" rel="stylesheet">
        <link rel="stylesheet" href="/assets/build/css/main.css?id=d8d178ed65bf53444d0d6ac161df7a3b">

            </head>

    <body class="flex flex-col justify-between min-h-screen font-sans leading-normal text-gray-800 bg-gray-100">
        <header class="flex items-center h-24 py-4 mb-8 bg-white border-b shadow" role="banner">
            <div class="container flex items-center px-4 mx-auto max-w-8xl lg:px-8">
                <div class="flex items-center">
                    <a href="/" title="Hotstream Docs home" class="inline-flex items-center">
                        <svg class="h-8 mr-3 md:h-10" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path class="dark:hidden" d="M48 24C48 30.3652 45.4714 36.4697 40.9706 40.9706C36.4697 45.4714 30.3652 48 24 48C18.4726 48 13.1419 46.0933 8.88706 42.6441C9.42805 42.2511 17.2368 36.5796 21.2191 33.7413C25.8385 30.4493 35.0964 23.9797 35.0964 23.9797H27.8214L39.2755 5.48888C39.8623 5.9731 40.4281 6.48694 40.9706 7.02944C45.4714 11.5303 48 17.6348 48 24Z" fill="#3784ff"/>
                            <path class="dark:hidden" d="M39.2207 5.44377C34.9483 1.93911 29.5741 0 24 0C17.6348 0 11.5303 2.52856 7.02944 7.02944C2.52856 11.5303 0 17.6348 0 24C0 30.3652 2.52856 36.4697 7.02944 40.9706C7.61856 41.5597 8.23515 42.115 8.8762 42.6353L20.4075 24.0204H13.1325C13.1325 24.0204 22.3904 17.5513 27.0099 14.2588C30.8073 11.5524 38.0854 6.26835 39.2207 5.44377Z" fill="#3784ff"/>
                            <path class="hidden dark:inline" d="M48 24C48 30.3652 45.4714 36.4697 40.9706 40.9706C36.4697 45.4714 30.3652 48 24 48C18.4726 48 13.1419 46.0933 8.88706 42.6441C9.42805 42.2511 17.2368 36.5796 21.2191 33.7413C25.8385 30.4493 35.0964 23.9797 35.0964 23.9797H27.8214L39.2755 5.48888C39.8623 5.9731 40.4281 6.48694 40.9706 7.02944C45.4714 11.5303 48 17.6348 48 24Z" fill="#ffe801"/>
                            <path class="hidden dark:inline" d="M39.2207 5.44377C34.9483 1.93911 29.5741 0 24 0C17.6348 0 11.5303 2.52856 7.02944 7.02944C2.52856 11.5303 0 17.6348 0 24C0 30.3652 2.52856 36.4697 7.02944 40.9706C7.61856 41.5597 8.23515 42.115 8.8762 42.6353L20.4075 24.0204H13.1325C13.1325 24.0204 22.3904 17.5513 27.0099 14.2588C30.8073 11.5524 38.0854 6.26835 39.2207 5.44377Z" fill="#ffe801"/>
                        </svg>

                        <h1 class="pr-4 my-0 text-lg font-semibold text-blue-900 md:text-2xl hover:text-blue-600">Hotstream Docs</h1>
                    </a>
                </div>

                <div class="flex items-center justify-end flex-1 text-right md:pl-10">
                                    </div>
            </div>

                <button class="flex justify-center items-center bg-blue-500 border border-blue-500 h-10 mr-4 px-5 rounded-full lg:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

        </header>

        <main role="main" class="flex-auto w-full">
            <section class="container px-6 py-4 mx-auto max-w-8xl md:px-8">
    <div class="flex flex-col lg:flex-row">
        <nav id="js-nav-menu" class="hidden nav-menu lg:block">
            <ul class="my-0">
            <li class="pl-4">
            
        <a href="/docs/1.x/getting-started"
            class="lvl0   nav-menu__item hover:text-blue-500"
        >
            Getting Started
        </a>
    
            
        <ul class="my-0">
            <li class="pl-4">
            
        <a href="/docs/1.x/installation"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Installation
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/docs/1.x/concept-overview"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Concept Overview
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/docs/1.x/building-your-app"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Building Your App
        </a>
    
    </li>
    </ul>
    </li>
            <li class="pl-4">
            
        <p class="nav-menu__item text-gray-600">Features</p>
    
            
        <ul class="my-0">
            <li class="pl-4">
            
        <a href="/docs/1.x/features/authentication"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Authentication
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/docs/1.x/features/registration"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Registration
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/docs/1.x/features/profile-management"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Profile Management
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/docs/1.x/features/update-password"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Update Password
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/docs/1.x/features/confirm-password"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Confirm Password
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/docs/1.x/features/two-factor-authentication"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Two Factor Authentication
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/docs/1.x/features/browser-sessions"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            Browser Sessions
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/docs/1.x/features/api"
            class="lvl1   nav-menu__item hover:text-blue-500"
        >
            API
        </a>
    
    </li>
            <li class="pl-4">
            
        <a href="/docs/1.x/features/teams"
            class="lvl1  active font-semibold text-blue-500 nav-menu__item hover:text-blue-500"
        >
            Teams
        </a>
    
    </li>
    </ul>
    </li>
    </ul>
        </nav>

        <div class="w-full pb-16 break-words docs-content DocSearch-content lg:w-3/5 lg:pl-4" v-pre>
            <h1>Teams</h1>

<p>If you installed Hostream using the <code>--teams</code> option, your application will be scaffolded to support team creation and management.</p>

<p>Hotstream's team features allow each registered user to create and belong to multiple teams. By default, every registered user will belong to a "Personal" team. For example, if a user named "Sally Jones" creates a new account, they will be assigned to a team named "Sally's Team". After registration, the user may rename this team or create additional teams.</p>

<p><img src="/assets/img/edit-team.png" alt="Screenshot of Teams" /></p>

<p>:::warning Hotstream Teams</p>

<p>Hotstream's team scaffolding and opinions may not work for every application. If it doesn't work for your use case, feel free to create a non-team based Hotstream application and manually add team functionality to your application based on your own needs.
:::</p>

<h2>Team Creation</h2>

<p>The team creation view is accessed via the top-right user navigation dropdown menu.</p>

<p><img src="/assets/img/create-team.png" alt="Screenshot of Teams" /></p>

<h3>Actions</h3>

<p>Like many other Hotstream features, team creation and deletion logic may be customized by modifying the relevant action classes within your <code>app/Actions/Hotstream</code> directory. These actions include <code>CreateTeam</code>, <code>UpdateTeamName</code>, and <code>DeleteTeam</code>. Each of these actions is invoked when their corresponding task is performed by the user in the application's UI. You are free to modify these actions as required based on your application's needs.</p>

<h3>Views</h3>

<p>The team creation view is displayed using the <code>resources/views/teams/create.blade.php</code> Blade template. Additional input fields that are specified on the team creation forms will be provided to the <code>App\Actions\Hotstream\CreateTeam</code> action class when the user creates a team.</p>

<h2>Inspecting User Teams</h2>

<p>Information about a user's teams may be accessed via the methods provided by the <code>HotwiredLaravel\Hotstream\HasTeams</code> trait. This trait is automatically applied to your application's <code>App\Models\User</code> model during Hotstream's installation. This trait provides a variety of helpful methods that allow you to inspect a user's teams:</p>

<pre><code class="language-php">// Access a user's currently selected team...
$user-&gt;currentTeam : HotwiredLaravel\Hotstream\Team

// Access all of the team's (including owned teams) that a user belongs to...
$user-&gt;allTeams() : Illuminate\Support\Collection

// Access all of a user's owned teams...
$user-&gt;ownedTeams : Illuminate\Database\Eloquent\Collection

// Access all of the teams that a user belongs to but does not own...
$user-&gt;teams : Illuminate\Database\Eloquent\Collection

// Access a user's "personal" team...
$user-&gt;personalTeam() : HotwiredLaravel\Hotstream\Team

// Determine if a user owns a given team...
$user-&gt;ownsTeam($team) : bool

// Determine if a user belongs to a given team...
$user-&gt;belongsToTeam($team) : bool

// Get the role that the user is assigned on the team...
$user-&gt;teamRole($team) : HotwiredLaravel\Hotstream\Role

// Determine if the user has the given role on the given team...
$user-&gt;hasTeamRole($team, 'admin') : bool

// Access an array of all permissions a user has for a given team...
$user-&gt;teamPermissions($team) : array

// Determine if a user has a given team permission...
$user-&gt;hasTeamPermission($team, 'server:create') : bool
</code></pre>

<h3>The Current Team</h3>

<p>Every user within a Hotstream application has a "current team". This is the team that the user is actively viewing resources for. For example, if you are building a calendar application, your application would display the upcoming calendar events for the user's current team.</p>

<p>You may access the user's current team using the <code>$user-&gt;currentTeam</code> Eloquent relationship. This relationship may be used to scope your other Eloquent queries by the user's current team:</p>

<pre><code class="language-php">use App\Models\Calendar;

return Calendar::where(
    'team_id', $request-&gt;user()-&gt;currentTeam-&gt;id
)-&gt;get();
</code></pre>

<p>:::tip Switching Teams</p>

<p>A user may switch their current team via the "team switcher" menu available within the Hotstream navigation bar.
:::</p>

<h3>The Team Object</h3>

<p>The team object that is accessed via <code>$user-&gt;currentTeam</code> or Hotstream's other team-related Eloquent queries provides a variety of useful methods for inspecting the team's attributes and relationships:</p>

<pre><code class="language-php">// Access the team's owner...
$team-&gt;owner : App\Models\User

// Get all of the team's users, including the owner...
$team-&gt;allUsers() : Illuminate\Database\Eloquent\Collection

// Get all of the team's users, excluding the owner...
$team-&gt;users : Illuminate\Database\Eloquent\Collection

// Determine if the given user is a team member...
$team-&gt;hasUser($user) : bool

// Determine if the team has a member with the given email address...
$team-&gt;hasUserWithEmail($emailAddress) : bool

// Determine if the given user is a team member with the given permission...
$team-&gt;userHasPermission($user, $permission) : bool
</code></pre>

<h2>Member Management</h2>

<p>Team members may be added and removed from a team via Hotstream's "Manage Team Members" screen. By default, only team owners can manage team membership. This restriction is defined in the <code>App\Policies\TeamPolicy</code> class. Naturally, you are free to modify this policy as you see fit.</p>

<h3>Member Management Actions</h3>

<p>Like the customization process for other Hotstream features, team member addition logic may be customized by modifying the <code>App\Actions\Hotstream\AddTeamMember</code> action class. The class' <code>add</code> method is invoked with the currently authenticated user, the <code>HotwiredLaravel\Hotstream\Team</code> instance, the email address of the user being added to the team, and the role (if applicable) of the user being added to the team.</p>

<p>This action is responsible for validating that the user can actually be added to the team and then adding the user to the team. You are free to customize this action based on the needs of your particular application.</p>

<p>Team member removal may be customized by modifying the <code>App\Actions\Hotstream\RemoveTeamMember</code> action class.</p>

<h3>Member Management Views</h3>

<p>The team member manager view is displayed using the <code>resources/views/teams-users/index.blade.php</code> Blade template.</p>

<h3>Invitations</h3>

<p>By default, Hotstream will simply add any existing application user that you specify to your team. However, many applications choose to send invitation emails to users that are invited to teams. If the user does not have an account, the invitation email can instruct them to create an account and accept the invitation. Or, if the user already has an account, they can accept or ignore the invitation.</p>

<p><img src="/assets/img/team-invitations.png" alt="Screenshot of Teams" /></p>

<p>Thankfully, Hotstream allows you to enable team member invitations for your application with just a few lines of code. To get started, pass the <code>invitations</code> option when enabling the "teams" feature for your application. This may be done by modifying the <code>features</code> array of your application's <code>config/hotstream.php</code> configuration file:</p>

<pre><code class="language-php">use HotwiredLaravel\Hotstream\Features;

'features' =&gt; [
    Features::termsAndPrivacyPolicy(),
    Features::profilePhotos(),
    Features::api(),
    Features::teams(['invitations' =&gt; true]),
    Features::accountDeletion(),
],
</code></pre>

<p>Once you have enabled Hotstream's invitations feature, users that are invited to teams will receive an invitation email with a link to accept the team invitation. Users will not be full members of the team until the invitation is accepted.</p>

<h4>Invitation Actions</h4>

<p>When a user is invited to the team, your application's <code>App\Actions\Hotstream\InviteTeamMember</code> action will be invoked with the currently authenticated user, the team that the new user is invited to, the email address of the invited user, and, optionally, the role that should be assigned to the user once they join the team. You are free to review this action or modify it based on the needs of your own application.</p>

<p>:::tip Laravel Mail</p>

<p>Before using the team invitation feature, you should ensure that your Laravel application is configured to <a href="https://laravel.com/docs/mail">send emails</a>. Otherwise, Laravel will be unable to send team invitation emails to your application's users.
:::</p>

<h4>Invitation Views</h4>

<p>The pending invitations list is displayed using the <code>resources/views/team-invitations/index.blade.php</code> Blade template. The form to create an invitation is displayed using the <code>resuorces/views/team-invitations/create.blade.php</code> Blade template.</p>

<h2>Roles / Permissions</h2>

<p>Each team member added to a team may be assigned a given role, and each role is assigned a set of permissions. Role permissions are defined in your application's <code>App\Providers\HotstreamServiceProvider</code> class using the <code>Hotstream::role</code> method. This method accepts a "slug" for the role, a user-friendly role name, the role permissions, and a description of the role. This information will be used to display the role within the team member management view.</p>

<p>For example, imagine we are building a server management application such as <a href="https://forge.laravel.com">Laravel Forge</a>. We might define our application's team roles like so:</p>

<pre><code class="language-php">Hotstream::defaultApiTokenPermissions(['read']);

Hotstream::role('admin', 'Administrator', [
    'server:create',
    'server:read',
    'server:update',
    'server:delete',
])-&gt;description('Administrator users can perform any action.');

Hotstream::role('support', 'Support Specialist', [
    'server:read',
])-&gt;description('Support specialists can read server information.');
</code></pre>

<p>:::tip Team API Support</p>

<p>When Hotstream is installed with team support, available API permissions are automatically derived by combining all unique permissions available to roles. Therefore, a separate call to the <code>Hotstream::permissions</code> method is unnecessary.
:::</p>

<h3>Authorization</h3>

<p>Of course, you will need a way to authorize that incoming requests initiated by a team member may actually be performed by that user. A user's team permissions may be inspected using the <code>hasTeamPermission</code> method available via the <code>HotwiredLaravel\Hotstream\HasTeams</code> trait.</p>

<p><strong>There is typically not a need to inspect a user's role. You only need to inspect that the user has a given granular permission.</strong> Roles are simply a presentational concept used to group granular permissions. Typically, you will execute calls to this method within your application's <a href="https://laravel.com/docs/authorization">authorization policies</a>:</p>

<pre><code class="language-php">return $user-&gt;hasTeamPermission($server-&gt;team, 'server:update');
</code></pre>

<h3>Combining Team Permissions With API Permissions</h3>

<p>When building a Hotstream application that provides both API support and team support, you should verify an incoming request's team permissions <strong>and</strong> API token permissions within your application's authorization policies. This is important because an API token may have the theoretical ability to perform an action while a user does not actually have that action granted to them via their team permissions:</p>

<pre><code class="language-php">/**
 * Determine whether the user can view a flight.
 */
public function view(User $user, Flight $flight): bool
{
    return $user-&gt;belongsToTeam($flight-&gt;team) &amp;&amp;
           $user-&gt;hasTeamPermission($flight-&gt;team, 'flight:view') &amp;&amp;
           $user-&gt;tokenCan('flight:view');
}
</code></pre>
        </div>
    </div>
</section>
        </main>

        <script src="/assets/build/js/main.js?id=3f6adb86212aa7bd86b17ce395834e0f"></script>

        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>

        <footer class="py-4 mt-12 text-sm text-center bg-white" role="contentinfo">
            <ul class="flex flex-col justify-center md:flex-row">
                <li>
                    Built with <a href="http://jigsaw.tighten.co" title="Jigsaw by Tighten">Jigsaw</a>
                    and <a href="https://tailwindcss.com" title="Tailwind CSS, a utility-first CSS framework">Tailwind CSS</a>.
                </li>
            </ul>
        </footer>
    </body>
</html>
